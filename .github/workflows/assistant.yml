name: Assistant

on:
  workflow_call:
    inputs:
      additional_context:
        type: string
        required: false
        description: Extra context

jobs:
  assistant:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      issues: write
      pull-requests: write
    steps:
      - name: Post smoke comment
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN || github.token }}
          script: |
            const issue_number = context.payload.issue?.number || context.payload.pull_request?.number;
            if (!issue_number) {
              core.setFailed('No issue/PR number found.');
            } else {
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number,
                body: 'Assistant wired âœ…'
              });
            }

